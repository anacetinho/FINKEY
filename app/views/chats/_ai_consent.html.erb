<div class="rounded-lg p-4 bg-container shadow-border-xs">
  <div class="flex justify-center mb-4">
    <%= render "chats/ai_avatar" %>
  </div>

  <h3 class="text-sm font-medium text-primary mb-1 -mt-2 text-center">Enable FinKey AI</h3>

  <p class="text-gray-600 mb-4 text-sm text-center">
    <% if Current.user.ai_available? %>
      FinKey AI can answer financial questions and provide insights based on your data. To use this feature you'll need to explicitly enable it.
    <% else %>
      <% if Setting.ai_assistant_enabled %>
        AI Assistant is enabled but not properly configured. Please check your <%= link_to "hosting settings", settings_hosting_path, class: "underline" %>.
      <% else %>
        To use the AI assistant, enable it in <%= link_to "hosting settings", settings_hosting_path, class: "underline" %> and configure your provider.
      <% end %>
    <% end %>
  </p>

  <% if Current.user.ai_available? %>
    <%= form_with url: user_path(Current.user), method: :patch, class: "w-full", data: { turbo: false } do |form| %>
      <%= form.hidden_field "user[ai_enabled]", value: true %>
      <%= form.hidden_field "user[redirect_to]", value: "home" %>
      <%= form.submit "Enable FinKey AI", class: "cursor-pointer hover:bg-inverse-hover w-full py-2 px-4 bg-inverse fg-inverse rounded-lg text-sm font-medium" %>
    <% end %>
  <% end %>

  <p class="text-xs text-secondary text-center mt-2">Disable anytime.  All data sent to our LLM providers is anonymized.</p>
</div>
